@DECIMAL

16000000 == F_CPU

REQUIRE BUS.WRITE lib/bus.spf
REQUIRE STEPPER lib/stepper.spf

4200 == #STEPS/ROT

BUS{ PB3 PB2 PB1 PB0 }BUS MOTOR.BUS \ D8-D11

: MOTOR.WRITE ( n -- )
  MOTOR.BUS BUS.WRITE
;

#STEPS/ROT  ' MOTOR.WRITE   STEPPER MOTOR

: INIT ( -- )
  MOTOR.BUS BUS.OUTPUT
  MOTOR STEPPER.INIT
  10 MOTOR STEPPER.SPEED
;


: MAIN
  INIT
  BEGIN
    -36 MOTOR STEPPER.ROTATE
    MOTOR STEPPER.RELEASE
    1000 MS
  AGAIN
;

BASE!
