[F] DECIMAL [P]

1000000 == F_CPU

REQUIRE {WRITE} lib/ports.spf

PB0 WIRE ENC_DOWN
PB1 WIRE ENC_UP
GROUP{ ENC_DOWN ENC_UP }GROUP ENCODER_WIRES

{PORTD} FCONST DIGITS_PORT

: >BCD  ( value -- bcd )
  0x0A /MOD ( hi lo )
  NIBBLE-JOIN
;

: PRINT ( n -- )
  >BCD DIGITS_PORT PORT.WRITE
;

: INIT
  ENCODER_WIRES {INPUT}
  ENCODER_WIRES {PULL_UP}
  [ 0xFF DIGITS_PORT ] {OUTPUT}
;

: MAIN
  INIT
  10 PRINT
;
